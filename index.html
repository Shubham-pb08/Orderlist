<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order List</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styling to enhance the Tailwind design */
        body {
            background-color: #f3f4f6;
        }

        .card {
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .quantity-controls button {
            width: 36px;
            height: 36px;
        }

        .btn-primary {
            background-color: #4f46e5;
            border: none;
        }
    </style>
</head>
<body>

<div class="container mx-auto mt-10 p-6 card bg-white">
    <h2 class="text-2xl font-semibold text-center mb-6 text-gray-800">Things to Order</h2>
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-200 rounded-lg">
            <thead class="bg-gray-200">
                <tr>
                    <th class="px-4 py-2 text-left text-gray-700 font-medium">Item Name</th>
                    <th class="px-4 py-2 text-center text-gray-700 font-medium">Quantity</th>
                    <th class="px-4 py-2 text-center text-gray-700 font-medium">Actions</th>
                </tr>
            </thead>
            <tbody id="order-list" class="divide-y divide-gray-200">
                <!-- List items will be dynamically added here -->
            </tbody>
        </table>
    </div>

    <!-- Submit Button -->
    <button id="submit-btn" class="btn-primary px-4 py-2 mt-5 text-white rounded-lg w-full hover:bg-indigo-700 transition duration-300">
        Submit
    </button>

    <!-- Selected Items Table -->
    <div class="table-container mt-10 hidden">
        <h3 class="text-xl font-semibold text-center mb-4 text-gray-800">Selected Items</h3>
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white border border-gray-200 rounded-lg" id="selected-items-table">
                <thead class="bg-green-200">
                    <tr>
                        <th class="px-4 py-2 text-left text-gray-700 font-medium">Item Name</th>
                        <th class="px-4 py-2 text-center text-gray-700 font-medium">Quantity</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    <!-- Selected items will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- Copy Button -->
        <button id="copy-btn" class="btn-primary px-4 py-2 mt-5 text-white rounded-lg w-full hover:bg-green-700 transition duration-300">
            Copy List
        </button>
    </div>
</div>

<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    // List of items
    const items = ['Apples', 'Bananas', 'Oranges', 'Milk', 'Bread'];

    // Reference to the order and selected items table
    const orderList = document.getElementById('order-list');
    const selectedItemsTable = document.getElementById('selected-items-table').querySelector('tbody');
    const tableContainer = document.querySelector('.table-container');

    // Function to render list items with quantity controls
    items.forEach(item => {
        // Create table row element
        const tableRow = document.createElement('tr');

        // Add item name, quantity, and action buttons
        tableRow.innerHTML = `
            <td class="px-4 py-2">${item}</td>
            <td class="px-4 py-2 text-center">
                <span class="quantity text-lg font-semibold">0</span>
            </td>
            <td class="px-4 py-2 text-center">
                <button class="btn-primary decrease text-white rounded-full w-8 h-8 hover:bg-indigo-500 transition duration-300">-</button>
                <button class="btn-primary increase text-white rounded-full w-8 h-8 ml-2 hover:bg-indigo-500 transition duration-300">+</button>
            </td>
        `;

        // Append to the order list
        orderList.appendChild(tableRow);
    });

    // Function to update the selected items table
    function updateSelectedItems() {
        // Clear the current table
        selectedItemsTable.innerHTML = '';

        // Iterate over all items and add those with quantity > 0
        document.querySelectorAll('#order-list tr').forEach(row => {
            const itemName = row.children[0].textContent;
            const quantity = parseInt(row.querySelector('.quantity').textContent);

            // Add items with quantity > 0 to the selected items table
            if (quantity > 0) {
                const selectedRow = document.createElement('tr');
                selectedRow.innerHTML = `
                    <td class="px-4 py-2">${itemName}</td>
                    <td class="px-4 py-2 text-center">${quantity}</td>
                `;
                selectedItemsTable.appendChild(selectedRow);
            }
        });

        // Show the table and copy button if there are selected items
        tableContainer.style.display = selectedItemsTable.children.length > 0 ? 'block' : 'none';
    }

    // Function to copy the selected items table to the clipboard
    function copyToClipboard() {
        let tableText = 'Item Name\tQuantity\n';
        selectedItemsTable.querySelectorAll('tr').forEach(row => {
            const itemName = row.children[0].textContent;
            const quantity = row.children[1].textContent;
            tableText += `${itemName}\t${quantity}\n`;
        });

        // Copy text to clipboard
        navigator.clipboard.writeText(tableText).then(() => {
            alert('List copied to clipboard!');
        }).catch(err => {
            console.error('Failed to copy: ', err);
        });
    }

    // Event listeners for quantity controls
    orderList.addEventListener('click', (event) => {
        if (event.target.classList.contains('increase')) {
            const quantityElement = event.target.closest('tr').querySelector('.quantity');
            quantityElement.textContent = parseInt(quantityElement.textContent) + 1;
        } else if (event.target.classList.contains('decrease')) {
            const quantityElement = event.target.closest('tr').querySelector('.quantity');
            const currentQuantity = parseInt(quantityElement.textContent);
            if (currentQuantity > 0) {
                quantityElement.textContent = currentQuantity - 1;
            }
        }
    });

    // Event listener for the submit button
    document.getElementById('submit-btn').addEventListener('click', updateSelectedItems);

    // Event listener for the copy button
    document.getElementById('copy-btn').addEventListener('click', copyToClipboard);
</script>

</body>
</html>
